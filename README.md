# AI Mail Secretary "K-Model" (Powered by TRC Unified Foundation)

## 概要
Google Apps Script (GAS) と Gemini API を高度に統合した、次世代型のメール管理・自動化エンジンです。
CEOや多忙なビジネスパーソンのために、大量のGmailから重要なものを抽出し、要約・分類・返信案の作成を自動化します。

## 主な機能
- **アトミック設定同期**: 設定の保存と未読カウントの取得を1つの処理で行い、UIのタイムラグを排除。
- **インテリジェント・メール解析**: 
  - メールの重要度（高/中/低）をAIが判定。
  - PII（個人情報）マスク機能を搭載。AIへの送信前に電話番号やアドレスを伏せ字にし、プライバシーを保護。
- **高度なセキュリティ基盤 (TRC Foundation Core)**:
  - PBKDF2およびHMACを用いた多重暗号化により、APIキーを安全に管理。
  - 100KBを超えるユーザーデータに対応するチャンク分割保存ロジック。
- **堅牢なAIエンジン制御**:
  - 複数モデル（Gemini 3 Pro / 2.5 Flash等）の優先順位付けと、クォータ制限時の自動フォールバック。
  - サーキットブレーカーによるシステム安定稼働の維持。

## 構成ファイル
- `Code.gs`: バックエンド・コアエンジン（暗号化、AI制御、Gmail連携）
- `Index.html`: React + Tailwind CSS を用いたSPA（シングルページアプリケーション）構成

## 技術的なこだわり（ポートフォリオとしての注目点）
1. **セキュリティ・バイ・デザイン**: AIへのデータ送信時に個人情報を保護する `maskPII` ロジックを独自実装しています。
2. **耐障害性**: APIのレート制限（429エラー）や一時的なサーバーエラーに対し、アトミックなリトライとモデルの動的切り替えを行うことで、ユーザー体験を損なわない設計にしました。
3. **データ設計**: GASの `PropertiesService` にある容量制限を突破するため、データを細分化して保存するチャンキング機能を搭載しています。

## 免責事項
本リポジトリのソースコードには、動作確認用のスプレッドシートID等は含まれていません。
利用には独自の Gemini API キーおよび設定用スプレッドシートが必要です。

---
Developed by ちゃろ
